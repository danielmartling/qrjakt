<!DOCTYPE html>
<html lang="en">

<head>
    <title>QR-jakten</title>
    <link rel="icon" type="image/x-icon" href="img/hollyrosa-square.png">
    <meta charset="utf-8" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <script src="scripts.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>

<body>
    <div id="hollyrosaruta" class="hollyrosa">
        <center>
            <p>
                Du har hittat<br>
                <b>
                    <a id="numFound"></a>/<a id="numAll"></a><br>
                </b>
                platser.<br>
                <!-- <input id="reloadButton" type="button" value="Ladda om kartan" onclick="addMarkersToMap();"/> -->
            <div id="log">
                test<br>
            </div>
            </p>
        </center>
    </div>
    <div id="map"></div>

    <script>
        debugMode = true;

        var basemaps = {
            OpenStreetMap: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.</a>.'
            }),
            Satellit: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: '&copy; <a href="https://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9">Esri, Maxar, Earthstar Geographics, and the GIS User Community</a>.'
            })
        };

        var overlays = {

        };

        var lfmap = L.map('map', {
            center: [60.25542, 18.69360],
            zoom: 14,
            minZoom: 12,
            layers: [basemaps.OpenStreetMap],
        });

        var southWest = L.latLng(60.0, 18.0);
        var northEast = L.latLng(60.4, 19.0);
        var bounds = L.latLngBounds(southWest, northEast);
        lfmap.setMaxBounds(bounds);
        lfmap.on('drag', function () {
            lfmap.panInsideBounds(bounds, { animate: true });
        });


        var scale = L.control.scale(
            { position: 'bottomright' }
        ).addTo(lfmap);
        var control = L.control.layers(basemaps, overlays).addTo(lfmap);

        if (!cookieExists("qrcookie1")) {
            createCookie("qrcookie1", "", 100);
        }
        evaluateThisPlace("000000-000000");

        if (debugMode) {
            text = readCookie("qrcookie1");
            console.log(text);
            console.log(cookieExists("qrcookie1"))
        }

        // isPlaceInCookie("");

        logdiv = document.getElementById("log");
        logdiv.append(cookieExists("qrcookie1"));
        logdiv.append(readCookie("qrcookie1"));

        
        var numFoundLocations = enumerateFoundLocations();
        document.getElementById('numFound').innerText = numFoundLocations.toString();
        var numLocations;
        enumerateAllLocations().then(function (results) {
            numLocations = results
            document.getElementById('numAll').innerText = numLocations;
        });

        addMarkersToMap();


    </script>
</body>

</html>